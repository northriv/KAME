<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>KAME2: atomic_shared_ptr&lt; T &gt; Class Template Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="../../classes.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>atomic_shared_ptr&lt; T &gt; Class Template Reference</h1><!-- doxytag: class="atomic_shared_ptr" --><code>#include &lt;<a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for atomic_shared_ptr&lt; T &gt;:</div>
<div class="dynsection">
<p><center><img src="../../dd/d84/classatomic__shared__ptr__inherit__graph.png" border="0" usemap="#dc/df3/atomic__shared__ptr_3_01_t_01_4__inherit__map" alt="Inheritance graph"></center>
<map name="dc/df3/atomic__shared__ptr_3_01_t_01_4__inherit__map">
<area shape="rect" id="node3" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; std::pair\&lt; XString, int \&gt; \&gt;" alt="" coords="836,36,1161,65"><area shape="rect" id="node5" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; long \&gt;" alt="" coords="900,89,1097,119"><area shape="rect" id="node7" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; unsigned long \&gt;" alt="" coords="869,143,1128,172"><area shape="rect" id="node9" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; std::deque\&lt; shared_ptr\&lt; XNIDAQmxInterface::SoftwareTrigger \&gt; \&gt; \&gt;" alt="" coords="697,196,1300,225"><area shape="rect" id="node11" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; double \&gt;" alt="" coords="892,249,1105,279"><area shape="rect" id="node13" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; Transactional::Data \&gt;" alt="" coords="852,303,1145,332"><area shape="rect" id="node15" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; XListener::FLAGS \&gt;" alt="" coords="857,356,1140,385"><area shape="rect" id="node17" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; ListenerList \&gt;" alt="" coords="877,409,1120,439"><area shape="rect" id="node19" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; int \&gt;" alt="" coords="905,463,1092,492"><area shape="rect" id="node21" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; unsigned int \&gt;" alt="" coords="875,516,1123,545"><area shape="rect" id="node23" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; CSplineApprox \&gt;" alt="" coords="867,569,1131,599"><area shape="rect" id="node25" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; std::deque\&lt; shared_ptr\&lt; XNode \&gt; \&gt; \&gt;" alt="" coords="793,623,1204,652"><area shape="rect" id="node27" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; Monitor::Passage \&gt;" alt="" coords="859,676,1139,705"><area shape="rect" id="node29" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; weak_ptr\&lt; XNode \&gt; \&gt;" alt="" coords="848,729,1149,759"><area shape="rect" id="node31" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; XString \&gt;" alt="" coords="889,783,1108,812"><area shape="rect" id="node33" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; Data \&gt;" alt="" coords="897,836,1100,865"><area shape="rect" id="node35" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; bool \&gt;" alt="" coords="900,889,1097,919"><area shape="rect" id="node37" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; std::deque\&lt; weak_ptr\&lt; Monitor \&gt; \&gt; \&gt;" alt="" coords="797,943,1200,972"><area shape="rect" id="node39" href="../../da/dad/classatomic__shared__ptr.html" title="atomic_shared_ptr\&lt; std::deque\&lt; XString \&gt; \&gt;" alt="" coords="840,996,1157,1025"></map>
<center><font size="2">[<a href="../../graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="../../d5/dbf/classatomic__shared__ptr-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename T&gt;<br>
 class atomic_shared_ptr&lt; T &gt;</h3>

This is an atomic variant of <em>boost::shared_ptr&lt;&gt;</em>.<br>
 <em>atomic_shared_ptr&lt;&gt;</em> can be shared among threads by the use of <em>operator=(_target_)</em>, <em>swap(_target_)</em>. An instance of <em>atomic_shared_ptr&lt;T&gt;</em> holds:<br>
 a) a pointer to <em>_atomic_shared_ptr_gref&lt;T&gt;</em>, which is a struct consisting of a pointer to the T-type object, and a global reference counter.<br>
 b) a local (temporary) reference counter, which is embedded in the above pointer by using the least significant bits that should be usually zero.<br>
 The values of a) and b), <em>m_ref</em>, are atomically handled with CAS machine codes. The purpose of b) the local reference counter is to tell the "observation" to the shared target before increasing the global reference counter. This process is implemented in <em><a class="el" href="../../da/dad/classatomic__shared__ptr.html#78671942ee8f08f42315e37cc74db97c">_reserve_scan_()</a></em>.<br>
 A function <em><a class="el" href="../../da/dad/classatomic__shared__ptr.html#2373719f9c53763d13aff57fac1e99c5">_leave_scan_()</a></em> tries to decrease the local counter first. When it fails, the global counter is decreased.<br>
 To swap the pointer and local reference counter (which will be reset to zero), the setter must adds the local counting to the global counter before swapping. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../dc/df9/classatomic__scoped__ptr.html">atomic_scoped_ptr</a> </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00099">99</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d6abfbd5ec5e499fd8b2c8ba2e26ca2a"></a><!-- doxytag: member="atomic_shared_ptr::Ref" ref="d6abfbd5ec5e499fd8b2c8ba2e26ca2a" args="" -->
typedef <br>
<a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">_atomic_shared_ptr_gref</a>&lt; T &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>Ref</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f8f8d4cc28c44000dbda833bcbe2f1f2"></a><!-- doxytag: member="atomic_shared_ptr::Refcnt" ref="f8f8d4cc28c44000dbda833bcbe2f1f2" args="" -->
typedef uintptr_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>Refcnt</b></td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="7b78dd757969433e764214d7487e39de"></a><!-- doxytag: member="atomic_shared_ptr::atomic_shared_ptr" ref="7b78dd757969433e764214d7487e39de" args="(Y *y)" -->
template&lt;typename Y&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>atomic_shared_ptr</b> (Y *y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="21a21c5adee5fce13141cc48228ca7f2"></a><!-- doxytag: member="atomic_shared_ptr::atomic_shared_ptr" ref="21a21c5adee5fce13141cc48228ca7f2" args="(const atomic_shared_ptr &amp;t)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>atomic_shared_ptr</b> (const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a> &amp;t)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="22bcff80908726685abef156c6843fdc"></a><!-- doxytag: member="atomic_shared_ptr::atomic_shared_ptr" ref="22bcff80908726685abef156c6843fdc" args="(const atomic_shared_ptr&lt; Y &gt; &amp;y)" -->
template&lt;typename Y&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>atomic_shared_ptr</b> (const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; Y &gt; &amp;y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#b55a02882e7a57f86e4b6c4fa0fb8afa">operator=</a> (const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a> &amp;t)</td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename Y&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a> &amp;&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#1ca0d7bfc1b0ef30280f0bde49bf59e7">operator=</a> (const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; Y &gt; &amp;y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fa6a4489f2b8514e5f59a135cd55f90b"></a><!-- doxytag: member="atomic_shared_ptr::reset" ref="fa6a4489f2b8514e5f59a135cd55f90b" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#fa6a4489f2b8514e5f59a135cd55f90b">reset</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This instance is atomically reset to null pointer. <br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename Y&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#166445c0916e379b3df6e04674999498">reset</a> (Y *y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#078c6bb7e88fc3d0b47e1bf15516f437">swap</a> (<a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a> &amp;x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#4f8ac979184aebcf62119b357b7362be">compareAndSwap</a> (const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a> &amp;oldvalue, <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a> &amp;target)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="662f0300e8bc76288e6eb36cbb04fbbe"></a><!-- doxytag: member="atomic_shared_ptr::get" ref="662f0300e8bc76288e6eb36cbb04fbbe" args="() const " -->
T *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#662f0300e8bc76288e6eb36cbb04fbbe">get</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The return value is apparently not valid for a shared instance. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="249c09718cdededbb6180a468b84f2be"></a><!-- doxytag: member="atomic_shared_ptr::operator*" ref="249c09718cdededbb6180a468b84f2be" args="() const " -->
T &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#249c09718cdededbb6180a468b84f2be">operator*</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The return value is apparently not valid for a shared instance. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8fda2229d33692e2e71f71cd3ac087fa"></a><!-- doxytag: member="atomic_shared_ptr::operator-&gt;" ref="8fda2229d33692e2e71f71cd3ac087fa" args="() const " -->
T *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#8fda2229d33692e2e71f71cd3ac087fa">operator-&gt;</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The return value is apparently not valid for a shared instance. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="74f8c83431f70b9fd2a171d68aa2a9ab"></a><!-- doxytag: member="atomic_shared_ptr::operator!" ref="74f8c83431f70b9fd2a171d68aa2a9ab" args="() const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#74f8c83431f70b9fd2a171d68aa2a9ab">operator!</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The return value is apparently not valid for a shared instance. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fc0a47f117ce558848fdda33e0467801"></a><!-- doxytag: member="atomic_shared_ptr::operator bool" ref="fc0a47f117ce558848fdda33e0467801" args="() const " -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#fc0a47f117ce558848fdda33e0467801">operator bool</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The return value is apparently not valid for a shared instance. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">Ref</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#af1dbcea4ad4ba25dfbff7ea727162cf">_scan_</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">Ref</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#78671942ee8f08f42315e37cc74db97c">_reserve_scan_</a> (Refcnt *) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#2373719f9c53763d13aff57fac1e99c5">_leave_scan_</a> (<a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">Ref</a> *) const </td></tr>

<tr><td colspan="2"><br><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4ce0b812016763b2b92d2c372daa18c8"></a><!-- doxytag: member="atomic_shared_ptr::_RefLocal" ref="4ce0b812016763b2b92d2c372daa18c8" args="" -->
typedef uintptr_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>_RefLocal</b></td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="035146b54db1c51b6a5a7aa751226b42"></a><!-- doxytag: member="atomic_shared_ptr::_pref" ref="035146b54db1c51b6a5a7aa751226b42" args="() const " -->
<a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">Ref</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#035146b54db1c51b6a5a7aa751226b42">_pref</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A pointer to global reference struct. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Refcnt&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dad/classatomic__shared__ptr.html#6436343566d187c082223d7e5a88a6bb">_refcnt</a> () const </td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ffa04d1a44a92c8818f5c1d120fe496a"></a><!-- doxytag: member="atomic_shared_ptr::m_ref" ref="ffa04d1a44a92c8818f5c1d120fe496a" args="" -->
_RefLocal&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_ref</b></td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b55a02882e7a57f86e4b6c4fa0fb8afa"></a><!-- doxytag: member="atomic_shared_ptr::operator=" ref="b55a02882e7a57f86e4b6c4fa0fb8afa" args="(const atomic_shared_ptr &amp;t)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&amp; <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::operator=           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>t</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>This instance is atomically replaced with <em>t</em>. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00126">126</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="1ca0d7bfc1b0ef30280f0bde49bf59e7"></a><!-- doxytag: member="atomic_shared_ptr::operator=" ref="1ca0d7bfc1b0ef30280f0bde49bf59e7" args="(const atomic_shared_ptr&lt; Y &gt; &amp;y)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;typename Y&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&amp; <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::operator=           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; Y &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>y</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>y</em>&nbsp;</td><td>This instance is atomically replaced with <em>t</em>. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00131">131</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="166445c0916e379b3df6e04674999498"></a><!-- doxytag: member="atomic_shared_ptr::reset" ref="166445c0916e379b3df6e04674999498" args="(Y *y)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;typename Y&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::reset           </td>
          <td>(</td>
          <td class="paramtype">Y *&nbsp;</td>
          <td class="paramname"> <em>y</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>y</em>&nbsp;</td><td>This instance is atomically reset with a pointer <em>y</em>. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00140">140</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="078c6bb7e88fc3d0b47e1bf15516f437"></a><!-- doxytag: member="atomic_shared_ptr::swap" ref="078c6bb7e88fc3d0b47e1bf15516f437" args="(atomic_shared_ptr &amp;x)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::swap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td><code>x</code> is atomically swapped with this instance. Nevertheless, this instance is not atomically replaced. That is, "this" must not be shared among threads. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00278">278</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

<p>References <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00252">atomic_shared_ptr&lt; T &gt;::_leave_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00183">atomic_shared_ptr&lt; T &gt;::_pref()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00186">atomic_shared_ptr&lt; T &gt;::_refcnt()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00203">atomic_shared_ptr&lt; T &gt;::_reserve_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00181">atomic_shared_ptr&lt; T &gt;::m_ref</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00082">_atomic_shared_ptr_gref&lt; T &gt;::refcnt</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00126">atomic_shared_ptr&lt; std::deque&lt; XString &gt; &gt;::operator=()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4f8ac979184aebcf62119b357b7362be"></a><!-- doxytag: member="atomic_shared_ptr::compareAndSwap" ref="4f8ac979184aebcf62119b357b7362be" args="(const atomic_shared_ptr &amp;oldvalue, atomic_shared_ptr &amp;target)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::compareAndSwap           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>oldvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>target</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if succeeded. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="../../da/dad/classatomic__shared__ptr.html#078c6bb7e88fc3d0b47e1bf15516f437">swap()</a> </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00305">305</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

<p>References <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00252">atomic_shared_ptr&lt; T &gt;::_leave_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00183">atomic_shared_ptr&lt; T &gt;::_pref()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00186">atomic_shared_ptr&lt; T &gt;::_refcnt()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00203">atomic_shared_ptr&lt; T &gt;::_reserve_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00181">atomic_shared_ptr&lt; T &gt;::m_ref</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00082">_atomic_shared_ptr_gref&lt; T &gt;::refcnt</a>.</p>

</div>
</div><p>
<a class="anchor" name="af1dbcea4ad4ba25dfbff7ea727162cf"></a><!-- doxytag: member="atomic_shared_ptr::_scan_" ref="af1dbcea4ad4ba25dfbff7ea727162cf" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::<a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">Ref</a> * <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::_scan_           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
atomically scans <em>m_ref</em> and increases the global reference counter. <em>_scan_</em> is used for atomically coping the pointer. 
<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00240">240</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

<p>References <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00252">atomic_shared_ptr&lt; T &gt;::_leave_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00203">atomic_shared_ptr&lt; T &gt;::_reserve_scan_()</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00082">_atomic_shared_ptr_gref&lt; T &gt;::refcnt</a>.</p>

</div>
</div><p>
<a class="anchor" name="78671942ee8f08f42315e37cc74db97c"></a><!-- doxytag: member="atomic_shared_ptr::_reserve_scan_" ref="78671942ee8f08f42315e37cc74db97c" args="(Refcnt *) const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::<a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">Ref</a> * <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::_reserve_scan_           </td>
          <td>(</td>
          <td class="paramtype">Refcnt *&nbsp;</td>
          <td class="paramname"> <em>rcnt</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
atomically scans <em>m_ref</em> and increases the local (temporary) reference counter. use <em>_leave_scan_</em> to release the temporary reference. 
<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00203">203</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

<p>References <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00183">atomic_shared_ptr&lt; T &gt;::_pref()</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00186">atomic_shared_ptr&lt; T &gt;::_refcnt()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00240">atomic_shared_ptr&lt; T &gt;::_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00305">atomic_shared_ptr&lt; T &gt;::compareAndSwap()</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00278">atomic_shared_ptr&lt; T &gt;::swap()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2373719f9c53763d13aff57fac1e99c5"></a><!-- doxytag: member="atomic_shared_ptr::_leave_scan_" ref="2373719f9c53763d13aff57fac1e99c5" args="(Ref *) const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::_leave_scan_           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/dff/struct__atomic__shared__ptr__gref.html">Ref</a> *&nbsp;</td>
          <td class="paramname"> <em>pref</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
tries to decrease local (temporary) reference counter. In case the reference is lost, <em>_leave_scan_</em> releases the global reference counter instead. 
<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00252">252</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

<p>References <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00183">atomic_shared_ptr&lt; T &gt;::_pref()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00186">atomic_shared_ptr&lt; T &gt;::_refcnt()</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00082">_atomic_shared_ptr_gref&lt; T &gt;::refcnt</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00240">atomic_shared_ptr&lt; T &gt;::_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00305">atomic_shared_ptr&lt; T &gt;::compareAndSwap()</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00278">atomic_shared_ptr&lt; T &gt;::swap()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6436343566d187c082223d7e5a88a6bb"></a><!-- doxytag: member="atomic_shared_ptr::_refcnt" ref="6436343566d187c082223d7e5a88a6bb" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Refcnt <a class="el" href="../../da/dad/classatomic__shared__ptr.html">atomic_shared_ptr</a>&lt; T &gt;::_refcnt           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Local (temporary) reference counter. Local reference counter is a trick to tell the observation to other threads. 
<p>Definition at line <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00186">186</a> of file <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00252">atomic_shared_ptr&lt; T &gt;::_leave_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00203">atomic_shared_ptr&lt; T &gt;::_reserve_scan_()</a>, <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00305">atomic_shared_ptr&lt; T &gt;::compareAndSwap()</a>, and <a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html#l00278">atomic_shared_ptr&lt; T &gt;::swap()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>kame/<a class="el" href="../../d7/d0b/atomic__smart__ptr_8h-source.html">atomic_smart_ptr.h</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 23 19:05:55 2009 for KAME2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
